
# Open Wavefront Reconstructor: 1.0.0


![Alt text](pics/OWR_a.png?raw=true "Title")

**OWR** (Open Wavefront Reconstructor) is a library written in C++ with a high degree of configuration, and it is aimed to facilitate future research in the field of wafefront reconstruction , as well as to provide a ready-to-go framework for being used in control systems.

The library contains the following capabilities:


* A mock-up generator of various types of incident wavefronts
* Implementation of different wavefront reconstruction algorithms: Zernike polynomials and Half Circular Harmonics for circular domains, and Legendre polynomials for square domains
* Runtime selection of the linear algebra library to perform the algebraic computations 
* Time profiling of the linear algebraic operations

All software entities are fully decoupled, therefore **OWR** can be easily modified or extended. 

<!--Additionally, porting the linear algebra functions to specific hardware architectures is part of our future work, which is aimed to decrease the CPU times below the millisecond for the operations associated with Equations (10) and (11). According to our experience, this will make the OpenWavefrontReconstructor an interesting option in control systems where the reconstruction is required to be nearly real-time, such as in the adaptive optics [4,14]. The diagram depicted in Figure 3 provides the different options offered by the library, and it shows a typical work flow that can be described as follows: 1.-->

<!--The user can choose the input wavefront as a simulated optical field generated by the mock-up generator, or as a direct input from a sensor. Usually, the sensor vendors provide libraries that can be used to retrieve information such as the focal spots coordinates, where the slopes are measured, and obviously these also provide the slopes. These coordinates and slopes are the inputs received by OpenWavefrontReconstructor, and are used to configure the matrices M and R defined by Equations (8) and (11). Similarly, the user can choose the particular algorithm that will perform the wavefront reconstruction, which can be instantiated as an object from the available classes representing the different approaches (see the previous enumeration list—item 2—for the list of available polynomials). Finally, the user can also select, at runtime, the linear algebra library to perform the linear algebraic operations. In version 1.0.0 of OpenWavefrontReconstructor, only the armadillo library is merged in the code; however, we plan to include more options, and the user can also implement the libraries of his/her preference. OpenWavefrontReconstructor’s design is intended to provide an easy-to-follow (nearly copy-paste) environment to implement new linear algebra libraries. -->


## Table of Contents

1. [ Introduction](#-introduction)
2. [Architecture](#architecture)
	1. [Work Flow](#work-flow)
	2. [Uml](#uml)
3. [ Installation](#-installation)
	1. [ Dependencies](#-dependencies)
	2. [ Build process and quick run](#-build-process-and-quick-run)
4. [ Usage](#-usage)
	1. [Available runtime options through the custom parser](#available-runtime-options-through-the-custom-parser)
	2. [ MockUp generator](#-mockup-generator)
	3. [ Using external sensors](#-using-external-sensors)
5. [ Contributing](#-contributing)
6. [ FAQ](#-faq)


##  Introduction 
A brief introduction to the mathematical background (intro+abstract of the paper), minimal number of equations.
Reference to the paper

## Architecture
### Work Flow
The diagram depicted below provides an overview of the different options offered by the library, and it shows a typical work flow that can be described as follows:
1. The user can choose the input wavefront as a simulated optical field generated by the mock-up generator, or as a direct input from a sensor. Usually, the sensor vendors provide libraries that can be used to retrieve information such as the focal spots coordinates, where the slopes are measured, and obviously these also provide the slopes. These coordinates and slopes are the inputs received by OpenWavefrontReconstructor, and are used to configure the matrices M and R defined by Equations (8) and (11). 
2. Similarly, the user can choose the particular algorithm that will perform the wavefront reconstruction, which can be instantiated as an object from the available classes representing the different approaches (see the previous enumeration list—item 2—for the list of available polynomials). 
3. Finally, the user can also select, at runtime, the linear algebra library to perform the linear algebraic operations. 

_Note: in version 1.0.0 of **OWR**, only the armadillo library is merged in the code; however, we plan to include more options, and the user can also implement the libraries of his/her preference. 
**OWR**'s design is intended to provide an easy-to-follow (nearly copy-paste) environment to implement new linear algebra libraries._


![Alt text](pics/OWR_flowDiagram.png?raw=true "Title")


### Uml
Sequence and class diagrams are (will be) included in `doc` folder: 
```
sequenceDiagram.odg
UML.xmi
```

##  Installation 
###  Dependencies
- The algebraic operations are implemented by means of the linear algebra library [armadillo](http://arma.sourceforge.net/).
- The logging is performed by  [log4CXX](https://logging.apache.org/log4cxx/latest_stable/).
- To 3D plot the final graphics the command-line driven graphing utility [Gnuplot](http://www.gnuplot.info/).
 
###  Build process and quick run

To generate the executable in `SRC/bin`:

```
cd SRC
make all
```

And to execute it: 

```
cd SRC/bin
./OWR
```

Note that in the same folder `bin` are located: 
- the configuration file for the logging facility: `Log4cxxConfig.xml`
- the parser file with the available runtime options: `config.cfg`


##  Usage

### Available runtime options through the custom parser


The **OWR** executable 

<!--generate_only = false-->
<!--libtype = armadillo -->
<!--mock_wave_front string = Circular; espherical -->
<!--alfa integer =0-->

<!--polynomialbasis = Zernike-->
<!--polynomialorder=10 -->
<!--gamma double = 2.2526-->
<!--#simu string = Zernike ; espherical -->
<!--setCon bool=1;-->

| Parser var name| options | explanation |
| ------------- |:-------------:| :-----|
| libtype      | armadillo | the linear algebra library |
| mock_wave_front      | Circular, espherical|   shape of simulated optical field |
| gammba double | 2.2526 |   solano  |
| polynomialbasis | Zernike |   solano  |
| polynomialorder | 10 | order of the polynomial |
| setCon | 1 or 0 | solano |

###  MockUp generator 

###  Using external sensors

##  Contributing
If you'd like to see support for more options, please create an issue or create a pull request. 
If you'd like to discuss the project more directly, feel free to reach us out through the emails in the SciCompDEV organizational repository.

##  FAQ

